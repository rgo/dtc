<h1 id="slogan"><%= t('cars.index.h1') %></h1>

<div id="intro">
  <% form_for @search, :html => {:id => "car_search", :class => "top_form"} do |f| %>
      <p class="select_field">
        <label for="fuel"><%= Car.human_attribute_name('fuel') %></label><br/>
        <%= f.select :fuel_is, [['Gasolina', 'Gasolina'], ['Gasóleo/Diesel', 'Gasóleo']], {}, :size => "5" %>
      </p>

      <p class="select_field">
        <label for="gear"><%= Car.human_attribute_name('gear') %></label><br/>
        <%= f.select :gear_is, [['Manual', 'Manual'], ['Automático', 'Automático'], ['Otros', 'Otros']], {}, :size => "5" %>
      </p>

      <p class="select_field">
        <label for="seats"><%= Car.human_attribute_name('seats') %></label><br/>
        <%= f.select :seats_range_is, seats_range_options_for_car, {}, :size => "5" %>
      </p>

      <p class="select_field">
        <label for="consume"><%= Car.human_attribute_name('consume') %></label><br />
        <%= f.select :consume_range_is, consume_range_options_for_car, {}, :size => 5%>
      </p>

      <p class="select_field">
        <%= submit_tag t('cars.search_button'), :class => "submit large grana awesome"%>
      </p>
  <% end %>
</div>

<div id="comparator">
  <h3><%= t('.h3_comparator') %></h3>
  <form>
    <label for="kilometers">¿Cuantos kilómetros haces al año?</label><br />
    <input name="kilometers" id="kilometers" value="15000" type="text" />
    <p><%= t('.cars_selected', :count => session['cars'].try(:size)) || 0 %></p>
    <input type="submit" value="Comparar" class="submit large grana awesome" />
  </form>
</div>

<h3><%= t('.h3_results') %></h3>

<table>
  <summary>Resultados de la búsqueda</summary>
  <theader>
    <tr>
      <th><%= order @search, :by => :brand, :as => Car.human_attribute_name(:brand) %></th>
      <th><%= order @search, :by => :finish, :as => Car.human_attribute_name(:finish) %></th>
      <th><%= order @search, :by => :fuel, :as => Car.human_attribute_name(:fuel) %></th>
      <th><%= order @search, :by => :consume, :as => Car.human_attribute_name(:consume) %></th>
      <th><%= order @search, :by => :emissions, :as => Car.human_attribute_name(:emissions) %></th>
      <th><%= order @search, :by => :rating, :as => Car.human_attribute_name(:rating)%></th>
      <th>&nbsp;</th>
    </tr>
  </theader>
  <tbody>
    <% @cars.each do |car| -%>
      <tr class="<%= cycle("even", "odd", :name => "row_class") %>">
        <td><%= car.brand %></td>
        <td><%= link_to [car.model,car.finish].join(' '), car %></td>
        <td><%= car.fuel %></td>
        <td class="number"><%= number_with_precision(car.consume, :precision => 2) %></td>
        <td class="number"><%= number_with_precision(car.emissions, :precision => 0) %></td>
        <td>
          <div class="rating_bar">
            <div style="width:<%= rating_to_percentage(car.rating) %>"></div>
          </div>
        </td>
        <td><%= comparator_link(car) %></td>
      </tr>
    <% end -%>
  </tbody>
</table>

<%= will_paginate @cars %>
